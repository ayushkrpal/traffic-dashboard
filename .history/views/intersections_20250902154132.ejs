<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Intersections</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #121212;
      color: #eaeaea;  /* brighter text */
      font-family: 'Segoe UI', sans-serif;
    }

    /* Navbar */
    .navbar {
      background: #1e1e1e;
      border-bottom: 1px solid #333;
    }
    .navbar-brand {
      font-weight: bold;
    }
    .nav-link {
      color: #bbb !important;
      transition: color 0.2s ease;
    }
    .nav-link:hover {
      color: #00e5ff !important;
    }
    .nav-link.active {
      color: #00e5ff !important;
      font-weight: bold;
    }

    /* Cards */
    .card {
      background: #1c1c1c;
      border-radius: 16px;
      border: 1px solid #2a2a2a;
      box-shadow: 0 4px 20px rgba(0,0,0,0.7);
      color: #eaeaea;
    }

    /* Intersection image */
    .intersection-img img {
      max-height: 350px;
      filter: drop-shadow(0 0 12px rgba(0,255,0,0.5));
      transition: transform 0.3s ease;
    }
    .intersection-img img:hover {
      transform: scale(1.05);
    }

    /* Buttons */
    .btn-custom {
      border-radius: 10px;
      transition: all 0.3s ease;
      font-weight: 500;
      color: #fff !important;
    }
    .btn-custom:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.6);
    }

    /* Signal buttons */
    .btn-success.active {
      background: #00e676 !important;
      box-shadow: 0 0 15px #00e676;
    }
    .btn-warning.active {
      background: #ffc107 !important;   /* darker amber instead of bright yellow */
      color: #000 !important;
      box-shadow: 0 0 15px #ffc107;
    }
    .btn-danger.active {
      background: #ff1744 !important;
      box-shadow: 0 0 15px #ff1744;
    }

    /* Toggle label */
    #modeLabel {
      font-weight: bold;
    }
    #modeLabel.text-primary { color: #00e5ff !important; }
    #modeLabel.text-danger { color: #ff4081 !important; }
  </style>
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand text-info" href="/">üö¶ Smart Traffic</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="/">Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="/intersections">Intersections</a></li>
          <li class="nav-item"><a class="nav-link active" href="/historical">Historical Data</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Header Row -->
  <div class="container mt-4">
    <div class="row align-items-center mb-4">
      <!-- Left: Auto/Manual Toggle -->
      <div class="col-md-3 d-flex align-items-center">
        <div class="form-check form-switch">
          <input class="form-check-input bg-secondary" type="checkbox" role="switch" id="modeToggle">
          <label class="form-check-label ms-2" for="modeToggle"><span id="modeLabel" class="text-primary">AUTO</span></label>
        </div>
      </div>

      <!-- Center: Title -->
      <div class="col-md-6 text-center">
        <h3 class="fw-bold m-0 text-info">SMART TRAFFIC MANAGEMENT SYSTEM</h3>
      </div>

      <!-- Right: Signal Toggle Group -->
      <div class="col-md-3">
        <div class="btn-group w-100" role="group" aria-label="Signal Timing">
          <button type="button" class="btn btn-success btn-custom active" data-time="30">30s</button>
          <button type="button" class="btn btn-warning btn-custom" data-time="45">45s</button>
          <button type="button" class="btn btn-danger btn-custom" data-time="50">50s</button>
        </div>
      </div>
    </div>

    <!-- Content Row -->
    <div class="row">
      <!-- Left intersection graphic -->
      <div class="col-md-7">
        <div class="card p-3 text-center shadow-sm intersection-img">
          <img src="/pic/pic1.png"
               alt="intersection" class="img-fluid mb-3">
        </div>
      </div>

      <!-- Right intersection data -->
      <div class="col-md-5">
        <div class="card p-4 mb-3 shadow-sm">
          <h5 class="fw-bold mb-3 text-info">INTERSECTION DATA</h5>
          <p>üöó Current Vehicles: <span class="text-warning fw-bold"><%= currentVehicles %></span></p>
          <p>üìà Predicted Vehicles: <span class="text-success fw-bold"><%= predictedVehicles %></span></p>
          <p>üö¶ Current Phase: <span class="text-info fw-bold"><%= currentPhase %></span></p>
          <p>‚è± Recommended Duration: <span class="text-danger fw-bold"><%= duration %>s</span></p>
          <button class="btn btn-outline-info w-100 btn-custom mb-2">
            <i class="bi bi-sliders"></i> Manual Control
          </button>
        </div>
        <button class="btn btn-success w-100 btn-custom">
          <i class="bi bi-lightbulb"></i> Change to Green
        </button>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom Script -->
  <script>
    const modeToggle = document.getElementById("modeToggle");
    const modeLabel = document.getElementById("modeLabel");

    modeToggle.addEventListener("change", () => {
      if (modeToggle.checked) {
        modeLabel.textContent = "MANUAL";
        modeLabel.classList.add("text-danger");
        modeLabel.classList.remove("text-primary");
      } else {
        modeLabel.textContent = "AUTO";
        modeLabel.classList.add("text-primary");
        modeLabel.classList.remove("text-danger");
      }
    });

    const signalButtons = document.querySelectorAll(".btn-group button");

    signalButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        signalButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        const selectedTime = btn.getAttribute("data-time");
        console.log("‚è± Selected duration:", selectedTime + "s");
      });
    });
  </script>
</body>
</html>
